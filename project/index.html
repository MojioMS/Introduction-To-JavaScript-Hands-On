<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1"/>


<style type="text/css">
	
	html, body { 
        height:100%
    }
    #map, #mapbottom {
        height:100%;
        border: 2px dashed black;
    }	  
	#bodytopcontainer {
		height:70%;
		padding-bottom:50px;
	}
	#bodycontainerbottom{
		height:55%;
	}
	#mapcontainer, #mapcontainerbottom {
		height: 100%;
	}
	.timeContainerAbsolute .slider-track-high{
		background:lightblue;
	}
	.info {
		padding: 6px 8px;
		font: 14px/16px Arial, Helvetica, sans-serif;
		background: white;
		background: rgba(255,255,255,0.8);
		box-shadow: 0 0 15px rgba(0,0,0,0.2);
		border-radius: 5px;
	}
	.info h4 {
		margin: 0 0 5px;
		color: #777;
	}
	
	
</style>


<link href="bootstrap-slider-master/dependencies/css/bootstrap.min.css" rel="stylesheet">
<link href="bootstrap-slider-master/css/bootstrap-slider.css" rel="stylesheet">
<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />
<link rel="stylesheet" type="text/css" href="http://www.shieldui.com/shared/components/latest/css/light/all.min.css" />


<script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>
<script type='text/javascript' src="bootstrap-slider-master/dependencies/js/jquery.min.js"></script>
<script type='text/javascript' src="bootstrap-slider-master/js/bootstrap-slider.js"></script>
<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
<script src="Chart.js-2.0.0-beta/Chart.js-2.0.0-beta/Chart.js" type="text/javascript"></script>


<title>Group 5</title>
</head>

<body role="document">
	<!-- Navigation Bar -->
    <nav class="navbar navbar-inverse">
        <div class="container-fuid">
            <div class="navbar-header">
                <a class="navbar-brand" href="" id="date"></a>
            </div>
            <div>
                <ul class="nav navbar-nav"
                	<li></li>
                    <li><a href="">Home</a></li>
                    <li><a href="">About</a></li>
                </ul>
            </div>
        </div>
    </nav> 
    
    <!-- upper body Container -->
    <div class="row" id="bodytopcontainer">
        
        <!-- Map Container -->
        <div class="col-md-8  col-xs-12 panel" id="mapcontainer">
            <div id="map">	</div>
        </div>
        
        <!-- User Interface Container -->
        <div class="col-md-4  col-xs-12 panel" id="UIcontainer">
       		<div class="panel panel-default">
                <div class="panel-heading">
                	<h3> Data option: </h3>
                </div>
        
                <!-- Selector: District or Subdistricts -->
                <div class="form-group">
                    <label for="sel_topDistrictLevel">Select district level:</label>
                </div>
                <div style="margin: 20px 0px 25px 0px;">
                    <select class="form-control" id="sel_topDistrictLevel" onchange="sel_topDistrictLevel()">
                        <option>Districts</option>
                        <option>Sub-districts</option>
                     </select>
                </div>
                
                <!-- Selector: Total, Male, Female, German, non-German, or  <25years -->
                <div class="form-group">
                    <label for="sel_topCategory">Select data category: </label>
                </div>
                <div style="margin: 20px 0px 25px 0px;">
                    <select class="form-control" id="sel_topCategory" onchange="sel_topCategory()">
                        <option>Total</option>
                        <option>Male</option>
                        <option>Female</option>
                        <option>German</option>
                        <option>non-German</option>
                        <option>younger than 25 years</option>
                     </select>
                </div>
                
                <div>
                    <!-- Radio Buttons: show absolute values OR show changes -->
                    <div class="container">
                        <label for="sel_top_abs_rel">Show...</label>
                        <form role="form" id="sel_top_abs_rel" style="margin: 0px 0px 0px 30px;">
                            <label class="radio">
                                <input type="radio" name="optradio" onclick="timeAbsolute()" checked="checked">...absolute values
                            </label>
                            <label class="radio">
                                <input type="radio" name="optradio" onclick="timeRelative()" >...changes between 2 years
                            </label>
                        </form>
                    </div>
                    
                    <!-- Timeline Selector(s): only one is shown at a time -->
                    <div id="timeContainerAbsolute" style="margin: 50px 0px 25px 30px;">
                         <input id="sliderABS" /> <!-- absolute timeline: 1 from {2010,2011,2012,2013,2014}-->
                    </div>
                    <div id="timeContainerRelative" style="margin: 50px 0px 25px 30px;">
                         <input id="sliderREL" /> <!-- relative changes: 2 non-equal from {2010,2011,2012,2013,2014}-->
                    </div>
                </div>
            </div>
            
            
        </div>
    </div>
    
    <!-- lower body container -->
    <div class="row" id="bodycontainerbottom">
    
        <!-- Map Container Bottom-->
        <div class="col-md-5  col-xs-12 panel" id="mapcontainerbottom">
            <div id="mapbottom">	</div>
        </div>
        
        <!-- User Interface Container Bottom -->
        <div class="col-md-2  col-xs-12 panel" id="UIcontainerbottom">
        	<div class="panel panel-default">
                <div class="panel-heading">
                	<h4> Comparison option: </h4>
                </div>
        
                <!-- Selector: District or Subdistricts -->
                <div class="form-group">
                    <label for="sel_botDistrictLevel">Select district level:</label>
                </div>
                <div style="margin: 20px 0px 25px 0px;">
                    <select class="form-control" id="sel_botDistrictLevel" onchange="sel_botDistrictLevel()">
                        <option onclick="show_districts()">Districts</option>
                        <option onclick="show_subdistricts()">Sub-districts</option>
                     </select>
                </div>
                
                <!-- Selector: Selection of Districts -->
                <div id="sel_dis">
                    <div class="form-group"> 
                        <label for="sel_botDistricts">Select districts by clicking on them at the map or select them from the list below: </label>
                    </div>
                    <div style="margin: 20px 0px 25px 0px;" >
                        <select multiple class="form-control" id="sel_botDistricts" onchange="sel_botDistricts()">
                            <option>Mitte</option>
                            <option>West</option>
                            <option>Nord</option>
                            <option>Ost</option>
                            <option>SÃ¼dost</option>
                            <option>Hiltrup</option>
                            <option>unknown</option>
                         </select>
                    </div>
                </div>
                
                <!-- Selector: Selection of Subdistricts -->
                <div id="sel_subdis">
                    <div class="form-group"> 
                        <label for="sel_botSubdistricts">Select subdistricts by clicking on them at the map or select them from the list below: </label>
                    </div>
                    <div style="margin: 20px 0px 25px 0px;">
                        <select multiple class="form-control" id="sel_botSubdistricts" onchange="sel_botSubdistricts()">
                            <option>Aegidii</option>
                            <option>Ueberwasser</option>
                            <option>Dom</option>
                            <option>Buddenturm</option>
                            <option>Martini</option>
                            <option>Pluggendorf</option>
                            <option>hi, lolz</option>
                            <option>unknown</option>
                         </select>
                    </div>
                </div>
                
                <!-- Selector: Total, Male, Female, German, non-German, or  <25years -->
                <div class="form-group">
                    <label for="sel_botCategory">Select data category: </label>
                </div>
                <div style="margin: 20px 0px 25px 0px;">
                    <select class="form-control" id="sel_botCategory" onchange="sel_botCategory()">
                        <option>Total</option>
                        <option>Male</option>
                        <option>Female</option>
                        <option>German</option>
                        <option>non-German</option>
                        <option>younger than 25 years</option>
                     </select>
                </div>
            </div>
            
            
        </div>
        
        <!-- detailChart -->
        <div class="col-md-5 col-xs-12">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 id="diagram_title_dis"> Districts in comparison:</h3>
                    <h3 hidden id="diagram_title_subdis"> Subdistricts in comparison: </h3>
                </div>
                <canvas id="myChart"></canvas>
                <div id="legend">
                </div>

            </div>
        </div>
    
    </div>

</body>

<script>
	
	var data = {
		labels: ["2010", "2011", "2012", "2013", "2014"],
		datasets: [
			{
				label: "Example data Aegidii",
				fill: false,
				backgroundColor: "rgba(70,70,220,0.2)",
				borderColor: "rgba(70,70,220,1)",
				pointBorderColor: "rgba(70,70,220,1)",
				pointBackgroundColor: "#fff",
				pointBorderWidth: 1,
				pointHoverRadius: 5,
				pointHoverBackgroundColor: "rgba(70,70,220,1)",
				pointHoverBorderColor: "rgba(70,70,220,1)",
				pointHoverBorderWidth: 2,
				data: [65, 59, 80, 81, 56]
			},
			{
				label: "Example data Ueberwasser",
				fill: false,
				backgroundColor: "rgba(70,220,60,0.2)",
				borderColor: "rgba(70,220,60,1)",
				pointBorderColor: "rgba(70,220,60,1)",
				pointBackgroundColor: "#fff",
				pointBorderWidth: 1,
				pointHoverRadius: 5,
				pointHoverBackgroundColor: "rgba(70,220,60,1)",
				pointHoverBorderColor: "rgba(70,220,60,1)",
				pointHoverBorderWidth: 2,
				data: [-30, 48, 40, 19, 86]
			},
			{
				label: "Example data Buddenturm",
				fill: false,
				backgroundColor: "rgba(220,70,70,0.2)",
				borderColor: "rgba(220,70,70,1)",
				pointBorderColor: "rgba(220,70,70,1)",
				pointBackgroundColor: "#fff",
				pointBorderWidth: 1,
				pointHoverRadius: 5,
				pointHoverBackgroundColor: "rgba(220,70,70,1)",
				pointHoverBorderColor: "rgba(220,70,70,1)",
				pointHoverBorderWidth: 2,
				data: [61, 28, 46, 39, 53]
			}
			
		]
	};
	
	
	// Get the context of the canvas element we want to select
	var ctx = document.getElementById("myChart").getContext("2d");
	var myLineChart = new Chart(ctx, { type: 'line', data:data, options: {}});
	document.getElementById("legend").innerHTML = myLineChart.generateLegend();

</script>

<!-- The following Script handles the triggers of the Top map User interfaces and updates the top map visualization -->
<script>

	window.onload = initialise;
	
	var maximum = 2000;
	var geoJsonLayer;
	var drawnFirstTime = true;
	
	/**
	* initialise() sets up the default starting selection when the website in loaded.
	*/
	function initialise(){
		topDataSelection$districtLevel = "districts";
		topDataSelection$category = "total";
		topDataSelection$dependency = "absolute";
		topDataSelection$year = 2012;
		topDataSelection$startingYear = 2010;
		topDataSelection$endingYear = 2012;
		updateTopMap();
		botDataSelection$districtLevel = "districts";
		botDataSelection$category = "total";
		botDataSelection$comparedDistricts = [];
		botDataSelection$comparedSubdistricts = [];
		updateBotMap();
	}
	
	/**
	*  updateTopMap() updates the top map visualization regarding to the chances of the user's selection:
	*/
	function updateTopMap(){
		// TODO: create passing info for selections and forward to calculateMaximValue() and drawToMap()
		
		calculateMaximumValue();
		if (topDataSelection$dependency == "absolute") {
			console.log("Selected Data for top map:"+topDataSelection$districtLevel+" "+topDataSelection$category+" "+topDataSelection$dependency+" "+topDataSelection$year);} else {
			console.log("Selected Data for top map:"+topDataSelection$districtLevel+" "+topDataSelection$category+" "+topDataSelection$dependency+" "+topDataSelection$startingYear+"-"+topDataSelection$endingYear);}
		
		// TODO: Draw Layer onto map(passing selection information forward):
		drawTopMapLayer();
	}

	// Top Container UI Category Selector:
	function sel_topCategory(){
		var index = document.getElementById("sel_topCategory").selectedIndex;
		// TODO: Show selected category data
		if (index==0){
			topDataSelection$category = "total";
		};
		if (index==1){
			topDataSelection$category = "male";
		};
		if (index==2){
			topDataSelection$category = "female";
		};
		if (index==3){
			topDataSelection$category = "german";
		};
		if (index==4){
			topDataSelection$category = "non-german";
		};
		if (index==5){
			topDataSelection$category = "younger25";
		};
		updateTopMap();
	}

	// Top Container UI District Level Selector:
	function sel_topDistrictLevel(){
		var index = document.getElementById("sel_topDistrictLevel").selectedIndex;
		if (index==0){
			topDataSelection$districtLevel = "districts";
		};
		if (index==1){
			topDataSelection$districtLevel = "subdistricts";
		};
		updateTopMap();
	};	
	
	// Absolute Values selected.
	function timeAbsolute(){
		var dependencyBefore = topDataSelection$dependency;
		$("#timeContainerAbsolute").show();
		$("#timeContainerRelative").hide();
		topDataSelection$dependency = "absolute";
		if (dependencyBefore!=topDataSelection$dependency) { updateTopMap(); }
	}
	
	// Relative Values selected.
	function timeRelative(){
		var dependencyBefore = topDataSelection$dependency;
		$("#timeContainerAbsolute").hide();
		$("#timeContainerRelative").show();
		topDataSelection$dependency = "relative";
		if (dependencyBefore!=topDataSelection$dependency) { updateTopMap(); }
	}

	// Timeslider for absolute values: third party bootstrap input fields:
	var sliderABS = new Slider("input#sliderABS", {
		value: 2012,
	  	ticks: [2010,2011,2012,2013,2014],
		ticks_labels: ['2010', '2011', '2012', '2013', '2014']
	});
	
	// Select a certain year while showing absolute numbers:
	sliderABS.on("change", function(){
		topDataSelection$year = sliderABS.getValue();
		updateTopMap();
	});
	
	// Timeslider for relative changes: third party bootstrap input fields:
	var sliderREL = new Slider("input#sliderREL", {
		range:true,
		value: [2010,2012],
	  	ticks: [2010,2011,2012,2013,2014],
		ticks_labels: ['2010', '2011', '2012', '2013', '2014']
	});
	
	// Select a certain start- and ending-year while showing relative changes:
	sliderREL.on("change", function(){
		var startBefore = topDataSelection$startingYear;
		var endingBefore = topDataSelection$endingYear;
		
		topDataSelection$startingYear = sliderREL.getValue()[0];
		topDataSelection$endingYear = sliderREL.getValue()[1];
		
		if ((startBefore != topDataSelection$startingYear) || (endingBefore != topDataSelection$endingYear)) {
			updateTopMap();
		}
	});

</script>

<!-- The following Script handles the triggers of the Bottom map User interfaces and updates the bottom map visualization -->
<script>
	
	/**
	*  updateBotMap() updates the top map visualization regarding to the chances of the user's selection:
	*/
	function updateBotMap(){
		// TODO: Update the map
		calculateMaximumValue();
		if (botDataSelection$districtLevel=="districts") {
			console.log("Selected Data for bot map:"+botDataSelection$districtLevel+" "+botDataSelection$category+" "+botDataSelection$comparedDistricts);}
		else {
			console.log("Selected Data for bot map:"+botDataSelection$districtLevel+" "+botDataSelection$category+" "+botDataSelection$comparedSubdistricts);}
	}
	
	// bot Container UI Category Selector:
	function sel_botCategory(){
		var index = document.getElementById("sel_botCategory").selectedIndex;
		if (index==0){
			botDataSelection$category = "total";
		};
		if (index==1){
			botDataSelection$category = "male";
		};
		if (index==2){
			botDataSelection$category = "female";
		};
		if (index==3){
			botDataSelection$category = "german";
		};
		if (index==4){
			botDataSelection$category = "non-german";
		};
		if (index==5){
			botDataSelection$category = "younger25";
		};
		updateBotMap();
	}

	// bot Container UI District Level Selector:
	function sel_botDistrictLevel(){
		var index = document.getElementById("sel_botDistrictLevel").selectedIndex;
		if (index==0){
			botDataSelection$districtLevel = "districts";
			$("#diagram_title_dis").show();
			$("#diagram_title_subdis").hide();
		};
		if (index==1){
			botDataSelection$districtLevel = "subdistricts";
			$("#diagram_title_dis").hide();
			$("#diagram_title_subdis").show();
		};
		updateBotMap();
	};

	// Show only the selection for districts:
	function show_districts(){
		$("#sel_dis").show();
		$("#sel_subdis").hide();
	}
	
	// Show only the selection for subdistricts:
	function show_subdistricts(){
		$("#sel_dis").hide();
		$("#sel_subdis").show();
	}
	
	// Selecting districts to compare them (add a district by clicking instead of ctrl+clicking on it):
	$("#sel_botDistricts").mousedown(function(e){
		e.preventDefault();
		var scroll = this.scrollTop;
		e.target.selected = !e.target.selected;
		this.scrollTop = scroll;
		$(this).focus();
		sel_botDistricts();
	}).mousemove(function(e){e.preventDefault()});
	
	// Change Selection information 
	function sel_botDistricts(){
		var result = [];
		var selector = document.getElementById("sel_botDistricts");
		var options = selector && selector.options;
		for (var i=0, iLen = options.length; i<iLen; i++){
			opt = options[i];
			if (opt.selected) {
				result.push(opt.value || opt.text);
			}
		}
		botDataSelection$comparedDistricts = result;
		updateBotMap();
	}
	
	// Selecting districts to compare them (add a district by clicking instead of ctrl+clicking on it):
	$("#sel_botSubdistricts").mousedown(function(e){
		e.preventDefault();
		var scroll = this.scrollTop;
		e.target.selected = !e.target.selected;
		this.scrollTop = scroll;
		$(this).focus();
		sel_botSubdistricts();
	}).mousemove(function(e){e.preventDefault()});
	
	// Change Selection information
	function sel_botSubdistricts(){
		var result = [];
		var selector = document.getElementById("sel_botSubdistricts");
		var options = selector && selector.options;
		for (var i=0, iLen = options.length; i<iLen; i++){
			opt = options[i];
			if (opt.selected) {
				result.push(opt.value || opt.text);
			}
		}
		botDataSelection$comparedSubdistricts = result;
		updateBotMap();
	}

</script>


<script>

	bounds = new L.LatLngBounds(new L.LatLng(51.815922, 7.314666), new L.LatLng(52.153459, 8.042863));
	
	var map = L.map("map").setView([51.959264, 7.625857], 12).setMaxBounds(bounds);
	var map_bottom = L.map("mapbottom").setView([51.959264, 7.625857], 12).setMaxBounds(bounds);
	map.setZoom(map.getBoundsZoom(bounds,true));
	map_bottom.setZoom(map.getBoundsZoom(bounds,true));
	
	// OSM layer
    L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(self.map);
	// OSM layer
    L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(self.map_bottom);
		
	
	// Add Custom Information Control:
	var info = L.control();
	info.onAdd = function (map) {
		this._div = L.DomUtil.create('div', 'info'); // create a div with a class "info"
		this.update();
		return this._div;
	};
	
	// method that we will use to update the control based on feature properties passed
	info.update = function (props) {
		this._div.innerHTML = '<h4>Employees subject to insurance contribution</h4>' +  (props ?
			'<b>' + props.name + '</b><br />' + props.value + ' employees '
			: 'Hover over a district');
	};
	
	info.addTo(map);
	
	
	
	//var marker = L.marker([51.963549, 7.613166]).addTo(map);
	
	//marker.bindPopup("WWU");
	function rgbToHex(r, g, b) {
		return "#" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);
	}
	
	function getColor(value) {
		var color = rgbToHex(255*(value / maximum),0,0);
		return color;
	}
	
	function calculateMaximumValue() {
		maximum = featureCollection.features[0].properties.value;
		for (var i=1, iLen = featureCollection.features.length; i<iLen; i++){
			feat = featureCollection.features[i];
			if (maximum < feat.properties.value){
				maximum = feat.properties.value;
			}
		}
		console.log("maximum set to: "+maximum);
	}
	
	// Aasee polygon:
	var featureCollection = {
		"type" : "FeatureCollection",
		"features": [
		
			{"type": "Feature",
			"properties": {
				"name": "Uppenberg",
				"value": 1322
			},
			"geometry": {
				"type": "Polygon",
				"coordinates": [
					[ [ 7.639498, 51.974966 ], [ 7.639285, 51.974783 ], [ 7.639213, 51.974737 ], [ 7.638931, 51.974417 ], [ 7.638501, 51.974142 ], [ 7.638213, 51.974003 ], [ 7.63807, 51.973911 ], [ 7.637638, 51.97368 ], [ 7.637565, 51.973679 ], [ 7.637131, 51.973539 ], [ 7.636696, 51.973444 ], [ 7.636552, 51.973397 ], [ 7.63648, 51.973351 ], [ 7.636481, 51.973306 ], [ 7.636339, 51.973169 ], [ 7.636275, 51.972897 ], [ 7.63621, 51.972625 ], [ 7.636069, 51.972443 ], [ 7.635555, 51.972528 ], [ 7.635188, 51.972614 ], [ 7.635113, 51.972658 ], [ 7.634088, 51.972781 ], [ 7.633647, 51.972867 ], [ 7.633574, 51.972866 ], [ 7.63306, 51.97295 ], [ 7.632621, 51.97299 ], [ 7.63137, 51.973292 ], [ 7.631077, 51.973333 ], [ 7.630856, 51.973376 ], [ 7.630783, 51.973375 ], [ 7.6299, 51.97359 ], [ 7.629091, 51.973807 ], [ 7.62865, 51.973892 ], [ 7.628062, 51.97402 ], [ 7.627767, 51.974107 ], [ 7.627253, 51.974192 ], [ 7.627033, 51.974234 ], [ 7.626373, 51.974317 ], [ 7.626225, 51.97436 ], [ 7.625639, 51.974444 ], [ 7.624833, 51.974524 ], [ 7.623663, 51.974601 ], [ 7.623371, 51.974598 ], [ 7.62264, 51.974589 ], [ 7.621545, 51.974576 ], [ 7.620815, 51.974568 ], [ 7.619649, 51.974509 ], [ 7.619503, 51.974507 ], [ 7.619211, 51.974504 ], [ 7.6187, 51.974498 ], [ 7.618116, 51.974491 ], [ 7.617752, 51.974442 ], [ 7.617679, 51.974441 ], [ 7.617314, 51.974436 ], [ 7.616293, 51.974379 ], [ 7.6152, 51.974321 ], [ 7.61396, 51.974262 ], [ 7.613887, 51.974261 ], [ 7.613303, 51.974254 ], [ 7.61221, 51.974196 ], [ 7.612137, 51.974195 ], [ 7.611772, 51.974191 ], [ 7.610313, 51.974128 ], [ 7.609802, 51.974122 ], [ 7.609729, 51.974121 ], [ 7.609437, 51.974118 ], [ 7.608345, 51.974015 ], [ 7.607981, 51.973965 ], [ 7.607908, 51.973965 ], [ 7.607401, 51.973823 ], [ 7.606967, 51.973683 ], [ 7.606318, 51.973449 ], [ 7.605871, 51.973715 ], [ 7.605499, 51.973936 ], [ 7.604979, 51.974246 ], [ 7.604681, 51.974423 ], [ 7.603937, 51.974866 ], [ 7.603863, 51.97491 ], [ 7.60349, 51.975131 ], [ 7.602819, 51.975575 ], [ 7.602151, 51.975928 ], [ 7.60163, 51.976238 ], [ 7.601257, 51.976504 ], [ 7.599249, 51.977654 ], [ 7.598432, 51.978095 ], [ 7.597761, 51.978539 ], [ 7.595679, 51.979733 ], [ 7.593744, 51.980883 ], [ 7.593148, 51.981237 ], [ 7.591066, 51.982431 ], [ 7.589726, 51.983228 ], [ 7.592246, 51.984387 ], [ 7.592391, 51.984434 ], [ 7.593478, 51.984718 ], [ 7.594058, 51.98486 ], [ 7.595799, 51.985242 ], [ 7.595872, 51.985243 ], [ 7.597107, 51.985438 ], [ 7.598052, 51.985585 ], [ 7.598852, 51.985684 ], [ 7.599656, 51.985694 ], [ 7.603303, 51.985873 ], [ 7.60622, 51.985998 ], [ 7.607022, 51.986052 ], [ 7.607603, 51.986149 ], [ 7.610072, 51.98663 ], [ 7.611234, 51.986869 ], [ 7.61509, 51.987366 ], [ 7.617054, 51.987615 ], [ 7.621346, 51.988207 ], [ 7.625347, 51.98875 ], [ 7.627819, 51.98914 ], [ 7.629275, 51.989292 ], [ 7.629714, 51.989298 ], [ 7.630296, 51.98935 ], [ 7.630516, 51.989352 ], [ 7.631685, 51.989321 ], [ 7.632564, 51.98924 ], [ 7.633226, 51.989113 ], [ 7.634035, 51.988941 ], [ 7.63499, 51.988727 ], [ 7.635727, 51.98851 ], [ 7.636466, 51.988247 ], [ 7.637581, 51.987628 ], [ 7.638617, 51.987189 ], [ 7.640023, 51.986573 ], [ 7.641351, 51.986137 ], [ 7.642088, 51.98592 ], [ 7.643119, 51.985661 ], [ 7.644148, 51.985447 ], [ 7.644661, 51.985363 ], [ 7.645467, 51.985282 ], [ 7.646786, 51.985161 ], [ 7.646382, 51.984028 ], [ 7.646317, 51.983757 ], [ 7.646247, 51.983666 ], [ 7.646249, 51.983575 ], [ 7.646113, 51.983257 ], [ 7.646047, 51.983031 ], [ 7.645975, 51.982985 ], [ 7.645842, 51.982532 ], [ 7.645771, 51.982486 ], [ 7.645774, 51.982396 ], [ 7.645702, 51.98235 ], [ 7.645356, 51.981714 ], [ 7.645076, 51.981304 ], [ 7.644937, 51.981077 ], [ 7.644729, 51.980714 ], [ 7.644657, 51.980668 ], [ 7.644589, 51.980486 ], [ 7.644449, 51.980304 ], [ 7.64438, 51.980168 ], [ 7.644239, 51.979986 ], [ 7.644241, 51.979941 ], [ 7.644172, 51.979804 ], [ 7.644033, 51.979577 ], [ 7.643688, 51.978896 ], [ 7.643483, 51.978442 ], [ 7.643059, 51.977986 ], [ 7.642491, 51.977438 ], [ 7.642348, 51.977346 ], [ 7.642349, 51.977301 ], [ 7.641135, 51.976384 ], [ 7.640279, 51.975697 ], [ 7.639996, 51.975423 ], [ 7.639781, 51.975285 ], [ 7.639782, 51.97524 ], [ 7.639567, 51.975102 ], [ 7.639498, 51.974966 ], [ 7.639498, 51.974966 ] ] 
				]}
			},
			{"type": "Feature",
			"properties": {
				"name": "Aaseestadt",
				"value": 823
			},
			"geometry": {
				"type": "Polygon",
				"coordinates": [
					 [ [ 7.601884, 51.935206 ], [ 7.601743, 51.935069 ], [ 7.601595, 51.935113 ], [ 7.601302, 51.935154 ], [ 7.601083, 51.935152 ], [ 7.600794, 51.935058 ], [ 7.600507, 51.934919 ], [ 7.600364, 51.934827 ], [ 7.600148, 51.934734 ], [ 7.600003, 51.934688 ], [ 7.599856, 51.934731 ], [ 7.599188, 51.935084 ], [ 7.598819, 51.935215 ], [ 7.598671, 51.935304 ], [ 7.598596, 51.935348 ], [ 7.5983, 51.93548 ], [ 7.598004, 51.935612 ], [ 7.597708, 51.935744 ], [ 7.59756, 51.935832 ], [ 7.597265, 51.935919 ], [ 7.597191, 51.935963 ], [ 7.596895, 51.936095 ], [ 7.596672, 51.936228 ], [ 7.596373, 51.93645 ], [ 7.596301, 51.936449 ], [ 7.595852, 51.936805 ], [ 7.595328, 51.937205 ], [ 7.595105, 51.937338 ], [ 7.594957, 51.937426 ], [ 7.594436, 51.937736 ], [ 7.593989, 51.938047 ], [ 7.593691, 51.938224 ], [ 7.593318, 51.93849 ], [ 7.5925, 51.938977 ], [ 7.591756, 51.939419 ], [ 7.591159, 51.939864 ], [ 7.591731, 51.940232 ], [ 7.591873, 51.940369 ], [ 7.592017, 51.940416 ], [ 7.593031, 51.940653 ], [ 7.593827, 51.940889 ], [ 7.5939, 51.940889 ], [ 7.594114, 51.941027 ], [ 7.594329, 51.941165 ], [ 7.594328, 51.941211 ], [ 7.594468, 51.941393 ], [ 7.594532, 51.941664 ], [ 7.594531, 51.94171 ], [ 7.594602, 51.941756 ], [ 7.594738, 51.942073 ], [ 7.594876, 51.942346 ], [ 7.594874, 51.942391 ], [ 7.595443, 51.942894 ], [ 7.596579, 51.943901 ], [ 7.597078, 51.944268 ], [ 7.598284, 51.945366 ], [ 7.599207, 51.946189 ], [ 7.599773, 51.946783 ], [ 7.600269, 51.94724 ], [ 7.600551, 51.94756 ], [ 7.600689, 51.947832 ], [ 7.600972, 51.948106 ], [ 7.601113, 51.948289 ], [ 7.601398, 51.948518 ], [ 7.601684, 51.948702 ], [ 7.60197, 51.948886 ], [ 7.602472, 51.949162 ], [ 7.603477, 51.949716 ], [ 7.604847, 51.950274 ], [ 7.604991, 51.950321 ], [ 7.605704, 51.950871 ], [ 7.607491, 51.952066 ], [ 7.608276, 51.952662 ], [ 7.609135, 51.953214 ], [ 7.60992, 51.953765 ], [ 7.610278, 51.953995 ], [ 7.610635, 51.95427 ], [ 7.61228, 51.955372 ], [ 7.612778, 51.955785 ], [ 7.612996, 51.955832 ], [ 7.614008, 51.95616 ], [ 7.614514, 51.956302 ], [ 7.615311, 51.956492 ], [ 7.61654, 51.956867 ], [ 7.617482, 51.957104 ], [ 7.618424, 51.957341 ], [ 7.618936, 51.957301 ], [ 7.619448, 51.957262 ], [ 7.619382, 51.957036 ], [ 7.619318, 51.956764 ], [ 7.619178, 51.956537 ], [ 7.619188, 51.956221 ], [ 7.61919, 51.956176 ], [ 7.619265, 51.956087 ], [ 7.619267, 51.956041 ], [ 7.619345, 51.955862 ], [ 7.619349, 51.955726 ], [ 7.619427, 51.955592 ], [ 7.619506, 51.955367 ], [ 7.619593, 51.954917 ], [ 7.619676, 51.954602 ], [ 7.619625, 51.953879 ], [ 7.619555, 51.953788 ], [ 7.61949, 51.953516 ], [ 7.619421, 51.95338 ], [ 7.619214, 51.953016 ], [ 7.619215, 51.952971 ], [ 7.619007, 51.952608 ], [ 7.618936, 51.952562 ], [ 7.618937, 51.952517 ], [ 7.618724, 51.952333 ], [ 7.618513, 51.95206 ], [ 7.617741, 51.951058 ], [ 7.617672, 51.950922 ], [ 7.6176, 51.950876 ], [ 7.616685, 51.949782 ], [ 7.616334, 51.949326 ], [ 7.616121, 51.949143 ], [ 7.615348, 51.948186 ], [ 7.614996, 51.947776 ], [ 7.614924, 51.94773 ], [ 7.614785, 51.947502 ], [ 7.614081, 51.946681 ], [ 7.61373, 51.946226 ], [ 7.613658, 51.94618 ], [ 7.61366, 51.946135 ], [ 7.612604, 51.944858 ], [ 7.612464, 51.944676 ], [ 7.611832, 51.943856 ], [ 7.611619, 51.943673 ], [ 7.611409, 51.943399 ], [ 7.610916, 51.942807 ], [ 7.610353, 51.942123 ], [ 7.610282, 51.942077 ], [ 7.610283, 51.942032 ], [ 7.610143, 51.94185 ], [ 7.610071, 51.941804 ], [ 7.609791, 51.941439 ], [ 7.609579, 51.941211 ], [ 7.609156, 51.94071 ], [ 7.608592, 51.940071 ], [ 7.608452, 51.939889 ], [ 7.60803, 51.939387 ], [ 7.607461, 51.938884 ], [ 7.607105, 51.938609 ], [ 7.607032, 51.938608 ], [ 7.605885, 51.937962 ], [ 7.605454, 51.937732 ], [ 7.604739, 51.937272 ], [ 7.604523, 51.937179 ], [ 7.604095, 51.936858 ], [ 7.603952, 51.936766 ], [ 7.603737, 51.936628 ], [ 7.603381, 51.936353 ], [ 7.60281, 51.93594 ], [ 7.602384, 51.935574 ], [ 7.601884, 51.935206 ], [ 7.601884, 51.935206 ] ]
				]}
			}
				
		]
	}
	
	geojsonLayer = L.geoJson(featureCollection, {
		style: function(Feature) {
				return {
						color: 'white',
						weight: 2,
						fillColor: getColor(Feature.properties.value),
						dashArray: '3',
						opacity: 0.8,
						fillOpacity: 0.5
					};
				},
		
	});
	
	function drawTopMapLayer(){
		if (!drawnFirstTime) {
			map.removeLayer(geojsonLayer);
		}
		geojsonLayer = L.geoJson(featureCollection, {
			style: function(Feature) {
				return {
						color: 'white',
						weight: 2,
						fillColor: getColor(Feature.properties.value),
						dashArray: '3',
						opacity: 0.8,
						fillOpacity: 0.7
					};
				},
				onEachFeature: onEachFeature
			}
		);
		geojsonLayer.addTo(map);
		drawnFirstTime = false;
	}
	
	
	function highlightFeature(e) {
		var layer = e.target;
	
		layer.setStyle({
			weight: 5,
			color: '#666',
			dashArray: '',
			fillOpacity: 0.7
		});
	
		if (!L.Browser.ie && !L.Browser.opera) {
			layer.bringToFront();
		}
		info.update(layer.feature.properties);
	}
	
	function resetHighlight(e) {
		geojsonLayer.resetStyle(e.target);
		info.update();
	}
	
	function zoomToFeature(e) {
		map.fitBounds(e.target.getBounds());
	}
	
	function onEachFeature(feature, layer) {
		layer.on({
			mouseover: highlightFeature,
			mouseout: resetHighlight,
			click: zoomToFeature
		});
	}
	
	
	$("#timeContainerRelative").hide();
	$("#sel_subdis").hide();
	
</script>


</html>